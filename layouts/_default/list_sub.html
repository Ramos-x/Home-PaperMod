{{ define "main" }}
  {{ if not .IsHome }}
    <header class="page-header">
      {{ partial "breadcrumbs.html" . }}
      <h1>{{ .Title }}</h1>
      {{ if .Description }}
        <div class="post-description">{{ .Description | markdownify }}</div>
      {{ end }}
    </header>
  {{ end }}

  {{ if .Content }}
    <div class="post-content">
      {{ if not (.Param "disableAnchoredHeadings") }}
        {{ partial "anchored_headings.html" .Content }}
      {{ else }}
        {{ .Content }}
      {{ end }}
    </div>
  {{ end }}

  {{/* 合并当前页面的常规页面和子section中的页面 */}}
  {{ $pages := union .RegularPages .Sections }}

  {{/* 分页处理 */}}
  {{ $paginator := .Paginate $pages }}

  {{/* 文章列表展示 */}}
  {{ range $paginator.Pages }}
    <article class="post-entry">
      {{ partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" false) }}
      <header class="entry-header">
        <h2>{{ .Title }}</h2>
      </header>
      {{ if ne (.Param "hideSummary") true }}
        <div class="entry-content">
          <p>{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}</p>
        </div>
      {{ end }}
      <footer class="entry-footer">
        {{ partial "post_meta.html" . }}
      </footer>
      <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
    </article>
  {{ end }}

  {{ if gt $paginator.TotalPages 1 }}
    <footer class="page-footer">
      <nav class="pagination">
        {{ if $paginator.HasPrev }}
          <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">« {{ i18n "prev_page" }}</a>
        {{ end }}
        {{ if $paginator.HasNext }}
          <a class="next" href="{{ $paginator.Next.URL | absURL }}">{{ i18n "next_page" }} »</a>
        {{ end }}
      </nav>
    </footer>
  {{ end }}
{{ end }}
