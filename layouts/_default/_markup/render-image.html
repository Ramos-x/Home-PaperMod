<!-- render-image.html -->

{{- $imagePath := .Get "image" -}}
{{- $webpPath := printf "%s.webp" $imagePath -}}

{{- if eq (path.Ext $imagePath) ".webp" -}}
    <img src="{{ $imagePath }}" alt="Image">
{{- else -}}
    <picture>
        <source srcset="{{ $webpPath }}" type="image/webp">
        <source srcset="{{ $imagePath }}" type="image/{{ path.Ext $imagePath }}">
        <img src="{{ $imagePath }}" alt="Image">
    </picture>
{{- end -}}